sudo: false
language: node_js
node_js:
  - '0.12'
branches:
  only:
    - master
before_install:
  - wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - tar -xjf phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - mv phantomjs "$TRAVIS_BUILD_DIR/tmp/phantomjs2"
  - export PHANTOMJS_BIN="$TRAVIS_BUILD_DIR/tmp/phantomjs2"
script:
  #- npm run lint
  - npm run test-ci
  #- npm run test-cross-browser
  #- npm run test-tz
  #- npm run test-tz-extended
cache:
  directories:
    - node_modules
addons:
  sauce_connect: true
deploy:
  provider: s3
  access_key_id: AKIAIXPFOIIE7FDYPAXA
  secret_access_key:
    secure: FPFCB5gn77ureKrRHbGZ6eF7mveemLt45FaU5g2jp5jjIjubQAwygI6KpmqmXgXEyv9u+bSYipYwCRvaN8YTiD1woEOF+6RENFMuGVYEqIMgfmAzQKGt+OEc9dhzgcnxFxPaW3il9/Eeq/S8zDCAykvJ5zv6DDm8k3oCHOvbJaY=
  bucket: date-fns
  local-dir: dist
  upload-dir: "$TRAVIS_TAG"
  acl: public_read
  detect_encoding: true
  cache_control: public, max-age=3122064000, s-maxage=3122064000
  expires: '2099-12-31 00:00:00 -0000'
  region: eu-central-1
  on:
    repo: date-fns/date-fns
    branch: master
    tags: true
